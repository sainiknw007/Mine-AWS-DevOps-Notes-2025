If state is deleted:

Best case: restore from backend versioning (S3/GCS/Azure/TF Cloud).

If no backup: use terraform import to rebuild state resource by resource.

Prevent it by always storing state remotely with versioning + locking.

--------------------------------------------

ğŸ”¹ 1. Check If You Have a Backup

If you use a remote backend (S3, GCS, Azure Blob, Terraform Cloud):

Most backends keep history/versioning of state files.

You can restore the previous version easily.

Example: AWS S3 with versioning enabled â†’ restore the last terraform.tfstate.

ğŸ‘‰ This is the best-case scenario.

ğŸ”¹ 2. If No Backup (Local State Lost)

You have to rebuild state manually so Terraform can manage existing resources again.

Two options:
Option A: terraform import

Use the terraform import command to bring existing resources back into state.

Example:

terraform import aws_instance.my_ec2 i-0abcd1234ef567890


aws_instance.my_ec2 â†’ resource in .tf code

i-0abcd1234ef567890 â†’ actual resource ID in AWS

ğŸ‘‰ Repeat this for each resource.

Option B: Refresh + Fix Drift

Run:

terraform refresh


â†’ This updates state based on resources it can find.

Then run:

terraform plan


â†’ Check what Terraform thinks is missing vs what exists.

If resources show as â€œto be createdâ€ but they already exist â†’ you need to import them.

If resources show as â€œto be destroyedâ€ but you still need them â†’ fix .tf code or import.

ğŸ”¹ 3. Prevent Future State Loss

Always use remote state (backend "s3", backend "gcs", etc.)

Enable versioning/locking (e.g., S3 + DynamoDB for locks).

Restrict who can delete state.

Automate backups